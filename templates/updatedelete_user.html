<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Document</title>
    <link rel="shortcut icon" href="#">
</head>
<body>
    <div style="background-image:url('static/ecommercebackground.jpg'); height:auto;" class="col-lg-12 col-12">
        <nav class="navbar navbar-expand-lg " style="background: rgb(25, 25, 145);">
            <p class="navbar-brand" style="height:25px; font-weight:bolder;color:white">E-commerce</p>
            <button class="navbar-toggler" style="color:blue;background:white;" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="#"><span class="sr-only">(current)</span></a>
                </li>
              </ul>
              <ul class="form-inline my-2 my-lg-0">
                <button class="btn btn-outline-success my-2 my-sm-0" type="button" style="color:white;" id="user_data">View User Data</button>
              </ul>
              <ul class="form-inline my-2 my-lg-0">
                <button class="btn btn-outline-success my-2 my-sm-0" type="button" style="color:white;" id="logout">Log Out</button>
              </ul>
            </div>
        </nav>
        <div class="form-group col-lg-12 col-8 ml-auto">
          <label id="warning"></label>
        </div>
        <div class="form-group col-lg-4 col-8 mx-5 float-lg-left">
            <label for="id" style="font-size: 25px;font-weight:bolder;">Id of User</label>
            <input type="text" class="form-control" id="id" placeholder="Id of User">
        </div>
        <div class="mx-5 col-lg-2 col-6"style="margin-top:30px">
            <button type="button" class="btn btn-primary" id="btn1">Show Data</button>
        </div>
        <div class="mx-5 col-lg-6 col-12 float-lg-left">
          <span>ID :</span><p style="font-size: 20px;color:rgb(0, 0, 0);font-weight:bold;" id='id1'>{{user.id}}</p>
          <p style="font-size: 20px;color:rgb(0, 0, 0);font-weight:bold;">First Name:  {{user.first_name}}</p>
          <p style="font-size: 20px;color:rgb(0, 0, 0);font-weight:bold;">Last Name :  {{user.last_name}}</p>
          <p style="font-size: 20px;color:rgb(0, 0, 0);font-weight:bold;">User Name :  {{user.username}}</p>
          <p style="font-size: 20px;color:rgb(0, 0, 0);font-weight:bold;">Email     :  {{user.email}}</p>
        </div>
        <div class="col-lg-4 col-12 float-lg-left"  id='options' >
          <div class="col-lg-7 col-6"style="margin-top:30px">
            <input type="text" class="form-control" id="update_firstname_input" placeholder="Update First Name">
            <button type="button" class="btn btn-primary" id="update_firstname_button">Update First Name</button>
            <input type="text" class="form-control" id="update_secondname_input" placeholder="Update Second Name" style="margin-top: 10px;">
            <button type="button" class="btn btn-primary" id="update_secondname_button">Update Second Name</button>
            <input type="text" class="form-control" id="update_username_input" placeholder="Update Userame" style="margin-top: 10px;">
            <button type="button" class="btn btn-primary" id="update_username_button">Update Username</button>
            <input type="text" class="form-control" id="update_email_input" placeholder="Update Email" style="margin-top: 10px;">
            <button type="button" class="btn btn-primary" id="update_email_button">Update Email</button>
            <button type="button" class="btn btn-primary" id="delete_user" style="margin-top: 30px;">Delete User</button>
          </div>
        </div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>   
<script>
  $(document).ready(function(){
    $('#user_data').click(function(){
      window.location.replace('admin_data')
    })
    $('#logout').click(function(){
      window.location.replace('logout')
    })
    $('#btn1').click(function(){
      var id = $('#id').val()
      var data = {
        'csrfmiddlewaretoken':'{{csrf_token}}',
        'id': id
      }
      if(id == ''){
        $('#warning').text('Id field cannot be empty')
      }else{
        $.ajax({
          url:'show_data',
          method : 'POST',
          data :data,
          dataType : 'json',
          success:function(data){
            if(data.success == 'True'){
              window.location.replace('deleteupdate_user')
            }
            else if(data.success = 'False'){
              $('warning').text('No user with this ID')
            }
          }
        })
      }
    })
    $('#delete_user').click(function(){
      var del_user = $('#id1').text()
      var data= {
        'csrfmiddlewaretoken':'{{csrf_token}}',
        'del_user':del_user,
        
      }
      if(del_user == ''){
        $('#warning').text('ID not selected')
      }else{
        $.ajax({
          url:'delete_user',
          method:'POST',
          data:data,
          dataType:'json',
          success:function(data){
            if(data.success == 'True'){
              $('#warning').text('USER DELETED SUCCESSFULLY')
              window.location.replace('deleteupdate_user')
            }
          }
        })
      }
    })
    $('#update_firstname_button').click(function(){
      var update_id = $('#id1').text()
      var update_firstname = $('#update_firstname_input').val()
      var data = {
        'csrfmiddlewaretoken':'{{csrf_token}}',
        'update_id' : update_id,
        'update_firstname': update_firstname,
      }
      if(update_id == ''){
        $('#warning').text('ID not selected')
      }else if(update_firstname == ''){
        $('#warning').text('Update field cannot be empty')
      }else{
        $.ajax({
          url:'/update_firstname',
          method:'POST',
          data:data,
          dataType:'json',
          success:function(data){
            if(data.success == 'True'){
              $('#warning').text('USER FIRST NAME SUCCESSFULLY UPDATED')
              window.location.replace('deleteupdate_user')
            }
          }
        })
      }
    })
    $('#update_secondname_button').click(function(){
      var update_id = $('#id1').text()
      var update_secondname = $('#update_secondname_input').val()
      var data = {
        'csrfmiddlewaretoken':'{{csrf_token}}',
        'update_id' : update_id,
        'update_firstname': update_secondname,
      }
      if(update_id == ''){
        $('#warning').text('ID not selected')
      }else if(update_secondname == ''){
        $('#warning').text('Update field cannot be empty')
      }else{
        $.ajax({
          url:'update_secondname',
          method:'POST',
          data:data,
          dataType:'json',
          success:function(data){
            if(data.success == 'True'){
              $('#warning').text('USER FIRST NAME SUCCESSFULLY UPDATED')
              window.location.replace('deleteupdate_user')
            }
          }
        })
      }
    })
    $('#update_username_button').click(function(){
      var update_id = $('#id1').text()
      var update_username = $('#update_username_input').val()
      var data = {
        'csrfmiddlewaretoken':'{{csrf_token}}',
        'update_id' : update_id,
        'update_firstname': update_username,
      }
      if(update_id == ''){
        $('#warning').text('ID not selected')
      }else if(update_username == ''){
        $('#warning').text('Update field cannot be empty')
      }else{
        $.ajax({
          url:'/update_username',
          method:'POST',
          data:data,
          dataType:'json',
          success:function(data){
            if(data.success == 'True'){
              $('#warning').text('USER FIRST NAME SUCCESSFULLY UPDATED')
              window.location.replace('deleteupdate_user')
            }
          }
        })
      }
    })
    $('#update_email_button').click(function(){
      var update_id = $('#id1').text()
      var update_email = $('#update_email_input').val()
      var data = {
        'csrfmiddlewaretoken':'{{csrf_token}}',
        'update_id' : update_id,
        'update_firstname': update_email,
      }
      if(update_id == ''){
        $('#warning').text('ID not selected')
      }else if(update_email == ''){
        $('#warning').text('Update field cannot be empty')
      }else{
        $.ajax({
          url:'/update_email',
          method:'POST',
          data:data,
          dataType:'json',
          success:function(data){
            if(data.success == 'True'){
              $('#warning').text('USER FIRST NAME SUCCESSFULLY UPDATED')
              window.location.replace('deleteupdate_user')
            }
          }
        })
      }
    })
  })
</script>
</body>
</html>